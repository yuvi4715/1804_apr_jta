<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Manager Page</title>


</head>
<body>

<h3 id = "loggedInAs"></h3>

<form method= "post" action = "/reimbursement/manager.do">

  <div class="container">
    <label for="requestID"><b>Request ID</b></label>
    <input id="reimbursementID"  type="text" placeholder="Enter request id number" name="id_number" required>

    <label for="status"><b>Status</b></label>
    <input id = "statusID" type="text" placeholder="Type in new status" name="status"   required>

    <button type="button" id ="update_request" onclick= "updateReimbursement()">Update</button>
    
  </div>
  
  <div>
  
  
<textarea id = "all_reimbursements"rows="40" cols="150">
Press refresh to get information
</textarea>
  
    <button type="button" id ="refresh_request" onclick= "showReimbursements()">Refresh</button>
  
  </div>
  

</form>



<script type="text/javascript">
var x = document.cookie;

console.log(x);
console.log("hello")


var reimbursementID = document.getElementById("reimbursementID").value;
var status = document.getElementById("statusID").value;

console.log(status)

function updateReimbursement() {
	
	var cookie = document.cookie;
	var manager = cookie.substring(9)
	var reimbursementID = document.getElementById("reimbursementID").value;
	var status = document.getElementById("statusID").value;
	console.log(reimbursementID+ "  succesfully did function   "+ status)
	
	var xhttp = new XMLHttpRequest();
	  xhttp.onreadystatechange = function() {
	    if (this.readyState == 4 && this.status == 200) {
	    	console.log("sent the info")
	    }
	  };
	  xhttp.open("POST", "/reimbursement/manager.do");
	xhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

	  xhttp.send("ID="+reimbursementID+"&status="+status+"&manager="+manager);
	
}


function showReimbursements() {
	
	
	console.log("  succesfully started showReimbursements ")
	
	var xhttp = new XMLHttpRequest();
	  xhttp.onreadystatechange = function() {
	    if (this.readyState == 4 && this.status == 200) {
	    	
	    	var test = this.responseText;
	    	console.log(test);
	    	document.getElementById("all_reimbursements").innerHTML = this.responseText;
	    	console.log("sucessucesffully finished showReimbursements");
	    	
	    }
	  };
	  xhttp.open("POST", "/reimbursement/getAllReimbursements.do");
	xhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
	xhttp.send();
	
}







</script>
</body>
</html>